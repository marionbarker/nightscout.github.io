<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>Cleanup - Nightscout</title>
        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/docco.min.css">
        <link href="../../css/admonitions.css" rel="stylesheet">

        <script src="../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../..">Nightscout</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Introduction <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../.." class="dropdown-item">What is Nightscout?</a>
</li>
                                    
<li>
    <a href="../../uploader/uploaders/" class="dropdown-item">How do I upload my data?</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Install <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../nightscout/insights/" class="dropdown-item">Overview</a>
</li>
                                    
<li>
    <a href="../../nightscout/new_user/" class="dropdown-item">Installation</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Configure <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../nightscout/setup_variables/" class="dropdown-item">Configure your Nightscout</a>
</li>
                                    
<li>
    <a href="../../uploader/setup/" class="dropdown-item">Configure your Uploader</a>
</li>
                                    
<li>
    <a href="../../nightscout/security/" class="dropdown-item">Secure your site</a>
</li>
                                    
<li>
    <a href="../../nightscout/downloaders/" class="dropdown-item">Follower Devices</a>
</li>
                                    
<li>
    <a href="../../nightscout/wearable/" class="dropdown-item">Nightscout on your watch</a>
</li>
                                    
<li>
    <a href="../../nightscout/multiadmin/" class="dropdown-item">Running multiple sites</a>
</li>
                                    
<li>
    <a href="../../nightscout/close_loop/" class="dropdown-item">Closed-loop Systems</a>
</li>
                                    
<li>
    <a href="../../nightscout/security/" class="dropdown-item">Security</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Use <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../nightscout/discover/" class="dropdown-item">Discover your site</a>
</li>
                                    
<li>
    <a href="../../nightscout/security/" class="dropdown-item">Secure your site</a>
</li>
                                    
<li>
    <a href="../../nightscout/reports/" class="dropdown-item">Reports</a>
</li>
                                    
<li>
    <a href="../../nightscout/profile_editor/" class="dropdown-item">Profile Editor</a>
</li>
                                    
<li>
    <a href="../../nightscout/admin_tools/" class="dropdown-item">Admin Tools</a>
</li>
                                    
<li>
    <a href="../../nightscout/security/" class="dropdown-item">Security</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Update <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../update/update/" class="dropdown-item">Updating your site</a>
</li>
                                    
<li>
    <a href="../../update/redeploy/" class="dropdown-item">Redeploying</a>
</li>
                                    
<li>
    <a href="../../update/newdatabase/" class="dropdown-item">Attach a new Atlas database</a>
</li>
                                    
<li>
    <a href="../../update/upd_stack/" class="dropdown-item">Update Heroku Stack</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Troubleshoot <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../troublehoot/" class="dropdown-item">Troubleshooting</a>
</li>
                                    
<li>
    <a href="../connection_string/" class="dropdown-item">Connection failure</a>
</li>
                                    
<li>
    <a href="./" class="dropdown-item active">Cleanup</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../connection_string/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" class="nav-link disabled">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#cleanup" class="nav-link">Cleanup</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#github" class="nav-link">Github</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#heroku" class="nav-link">Heroku</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#atlas" class="nav-link">Atlas</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="cleanup">Cleanup<a class="headerlink" href="#cleanup" title="Permanent link">⌁</a></h1>
<p>After unsuccessful attempts you might want to cleanup the various accounts to avoid confusion.</p>
<p>If you're still trying to deploy your first Nightscout, ignore all data loss recommendations below.</p>
<p>If you have a large amount of CGM data, be extra cautious when performing Atlas cleanup.</p>
<p></br></p>
<h2 id="github"><a href="https://github.com/login">Github</a><a class="headerlink" href="#github" title="Permanent link">⌁</a></h2>
<p>Github cleanup consists of deleting your fork and forking again the <a href="https://github.com/nightscout/cgm-remote-monitor">official latest released version</a>.</p>
<p>Follow <a href="../../update/redeploy/#step-1-cleanup-github">Step 1 of this guide (ONLY STEP1!)</a>.</p>
<p></br></p>
<h2 id="heroku"><a href="https://id.heroku.com/">Heroku</a><a class="headerlink" href="#heroku" title="Permanent link">⌁</a></h2>
<p>If you experience issues during deployment you might end up with many apps. Make sure you keep the last one that was functional or delete all before attempting a new deployment. This will just make it easier to find which app you're trying to build. Keeping sleeping apps doesn't have any negative impact but no real advantage unless you do it on purpose.</p>
<p>Deleting an Heroku app does <strong>not</strong> delete your Nightscout data, but you might want to write down your variables if your site was functional before. Note you can also rename an app (unless the name is already in use in heroku.com).</p>
<p><img src="../img/Cleanup00.png" style="zoom:80%;" ></p>
<p>To delete an app, select it and go to <code>Settings</code>, scroll down to <code>Delete App</code></p>
<p><img src="../img/Cleanup01.png" style="zoom:80%;" ></p>
<p>Copy and paste your app name to confirm deletion, </p>
<p><img src="../img/Cleanup02.png" style="zoom:80%;" ></p>
<p></br></p>
<h2 id="atlas"><a href="https://account.mongodb.com/account/login">Atlas</a><a class="headerlink" href="#atlas" title="Permanent link">⌁</a></h2>
<p>It is very easy to get lost in Atlas.</p>
<p>The structure from top to bottom is: Organization, Projects and Databases. You can have several organizations, each of them several projects and each of them several databases.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you are deploying a brand new Nightscout make sure you have one organization, one project and one cluster created. No more no less.</p>
</div>
<p>If you want to cleanup Atlas, unless you don't have data, you must first find out which database contains your data. For this, start from <code>View All Organizations</code>:</p>
<p><img src="../img/Cleanup03.png" style="zoom:80%;" ></p>
<p>You can delete empty organizations (those without any project inside).</p>
<p><img src="../img/Cleanup04.png" style="zoom:80%;" ></p>
<p>Select the organization, then top left the cog wheel to go in <code>Settings</code>, then scroll down to <code>Delete Organization</code>: <code>Delete</code>.</p>
<p><img src="../img/Cleanup06.png" style="zoom:80%;" ></p>
<p>If an organization is connected to mLab delete it only if you don't want to migrate the database or if you're done it with another organization. Deleting an organization without projects will not delete your data. </p>
<p><img src="../img/Cleanup05.png" style="zoom:80%;" ></p>
<hr />
<p>Once inside an organization, you will see its projects. You can safely delete projects without clusters.</p>
<p><img src="../img/Cleanup07.png" style="zoom:80%;" ></p>
<p>Deleting an empty project doesn't delete your Nightscout data.</p>
<p><img src="../img/Cleanup08.png" style="zoom:80%;" ></p>
<p>For non-empty projects continue reading before deciding to delete them.</p>
<hr />
<p>You can then move to your project (select it) and check its database(s) selecting <code>COLLECTIONS</code></p>
<p><img src="../img/Cleanup09.png" style="zoom:80%;" ></p>
<p>An empty project will look like below, and this is typically what you have before deploying Nightscout in Heroku. Once Nightscout is deployed in a project, a new database will be created there.</p>
<p><img src="../img/Cleanup10.png" style="zoom:80%;" ></p>
<p>The database currently used by your Nightscout is the one specified in the connection string, in the example below <code>dbname</code>. Whenever you change the database name in the connection string, a new database will be created in your project.</p>
<p><code>mongodb+srv://atlasusername:atlaspassword@cluster0.zzzzz.mongodb.net/</code><strong><code>dbname</code></strong><code>?retryWrites=true&amp;w=majority</code></p>
<p>There is usually one database for Nightscout, if there are several, select one and then the other(s) to understand which one contains your data. For this, select <code>entries</code>.</p>
<p><img src="../img/Cleanup11.png" style="zoom:80%;" ></p>
<p>A large database is most probably one you want to keep.</p>
<p><img src="../img/Cleanup12.png" style="zoom:80%;" ></p>
<p>You can safely delete empty databases (check the size first).</p>
<p><img src="../img/Cleanup13.png" style="zoom:80%;" ></p>
<div class="admonition warning">
<p class="admonition-title">If you're not sure you're deleting the right database, just leave it.</p>
</div>
<p>Hover on the database name and click the bin icon. Confirm deletion by copying the database name and click <code>Drop</code>.</p>
<p><img src="../img/Cleanup14.png" style="zoom:80%;" ></p>
<p>If your database gets recreated after you deleted it this means you MONGODB_URI or MONGO_CONNECTION string is pointing to it.</p>
<p></br></p>
<h6 id="if-you-want-to-delete-a-non-empty-project-you-need-to-terminate-all-clusters-belonging-to-it">If you want to delete a non-empty Project you need to terminate all clusters belonging to it.<a class="headerlink" href="#if-you-want-to-delete-a-non-empty-project-you-need-to-terminate-all-clusters-belonging-to-it" title="Permanent link">⌁</a></h6>
<p><img src="../img/Cleanup15.png" style="zoom:80%;" ></p>
<div class="admonition warning">
<p class="admonition-title">Terminating a cluster will delete all information and databases in this cluster!</p>
</div>
<p>Confirm with your cluster name and wait until shutdown is complete.</p>
<p><img src="../img/Cleanup16.png" style="zoom:80%;" ></p>
<p>You can then delete the empty project.</p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js" defer></script>
        <script src="../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
